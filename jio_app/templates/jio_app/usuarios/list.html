{% extends "jio_app/base_admin.html" %}

{% block page_title %}Usuarios{% endblock %}

{% block page_actions %}
<a class="btn btn-primary" href="{% url 'jio_app:usuarios_create' %}"><i class="fas fa-plus"></i> Nuevo Usuario</a>
{% endblock %}

{% block content %}
<form method="get" class="row g-2 mb-3">
  <div class="col-auto">
    <input type="text" name="q" class="form-control" placeholder="Buscar por username" value="{{ query }}">
  </div>
  <div class="col-auto">
    <button class="btn btn-outline-secondary" type="submit"><i class="fas fa-search"></i></button>
  </div>
  {% if query %}
  <div class="col-auto">
    <a href="{% url 'jio_app:usuarios_list' %}" class="btn btn-outline-dark">Limpiar</a>
  </div>
  {% endif %}
  <div class="col ms-auto text-end">
    <a href="{% url 'jio_app:admin_panel' %}" class="btn btn-link">← Volver al dashboard</a>
  </div>
  </form>

<div class="table-responsive">
  <table class="table table-striped align-middle">
    <thead>
      <tr>
        <th>#</th>
        <th>Username</th>
        <th>Email</th>
        <th>Nombre</th>
        <th>Tipo</th>
        <th>Staff</th>
        <th>Activo</th>
        <th style="width: 160px;">Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for u in usuarios %}
      <tr>
        <td>{{ u.id }}</td>
        <td>{{ u.username }}</td>
        <td>{{ u.email }}</td>
        <td>{{ u.get_full_name|default:"-" }}</td>
        <td>{{ u.get_tipo_usuario_display }}</td>
        <td>{% if u.is_staff %}<span class="badge bg-info">Sí</span>{% else %}<span class="badge bg-secondary">No</span>{% endif %}</td>
        <td>{% if u.is_active %}<span class="badge bg-success">Sí</span>{% else %}<span class="badge bg-danger">No</span>{% endif %}</td>
        <td>
          <a href="{% url 'jio_app:usuarios_update' u.id %}" class="btn btn-sm btn-warning"><i class="fas fa-edit"></i></a>
          <a href="{% url 'jio_app:usuarios_delete' u.id %}" class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="8" class="text-center">Sin usuarios</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}


